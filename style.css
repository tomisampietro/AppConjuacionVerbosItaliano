/* ============================
   FERRARI INSPIRED - ELEGANT & PREMIUM THEME
   ============================ */

:root{
    --bg:#07080a;
    --panel:#0f1417;
    --edge:#1f2226;
    --accent:#D40000;
    --accent-2:#FF4A2A;
    --accent-3:#FFD700;
    --accent-4:#FFFFFF;
    --muted:#9aa3ad;
    --muted-2:#c7d0d6;
    --text:#e9f0f3;
    --glass: rgba(255,255,255,0.035);
    --glass-2: rgba(255,255,255,0.06);
    --surface: rgba(20,22,24,0.62);
    --radius: 14px;
    --shadow-soft: 0 10px 30px rgba(2,6,23,0.6);
    --accent-grad: linear-gradient(90deg, var(--accent), var(--accent-2));
}

html, body, .stApp{
    background: linear-gradient(180deg, #07080a 0%, #0b0e11 60%, #08090b 100%) !important;
    color: var(--text) !important;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
}

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800&display=swap');

*{
    font-family:'Inter', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
}

/* HERO */
.hero{
    display:flex;
    gap:1.5rem;
    align-items:center;
    justify-content:space-between;
    padding:2rem 2.5rem;
    border-radius:20px;
    background:linear-gradient(135deg, rgba(212,0,0,0.08), rgba(255,40,0,0.04), rgba(16,16,16,0.85));
    border:1px solid rgba(255,255,255,0.1);
    box-shadow:0 20px 50px rgba(0,0,0,0.8);
    margin-bottom:2rem;
    transition:transform 0.3s ease, box-shadow 0.3s ease;
}
.hero:hover{
    transform:translateY(-5px);
    box-shadow:0 30px 70px rgba(212,0,0,0.2);
}
.hero-left{ flex:1; }
.hero-right{ display:flex; align-items:center; justify-content:center; width:140px; }

.hero-title{
    font-family:'Montserrat', sans-serif;
    font-size:3rem;
    font-weight:800;
    margin:0;
    color:var(--text);
    letter-spacing:1px;
    text-shadow:0 2px 10px rgba(212,0,0,0.5);
}
.hero-sub{
    color:var(--muted-2);
    margin-top:0.5rem;
    font-size:1.05rem;
    line-height:1.4;
}

/* Color chips */
.color-palette{ display:flex; gap:10px; margin-top:1rem; }
.color-chip{
    width:20px; height:20px; border-radius:50%;
    box-shadow:0 4px 12px rgba(0,0,0,0.5);
    border:1px solid rgba(255,255,255,0.1);
    transition:transform 0.2s ease;
}
.color-chip:hover{ transform:scale(1.2); }
.color-chip.it-green{ background:#009246; }
.color-chip.it-red{ background:#ce2b37; }
.color-chip.accent{ background:var(--accent-2); }
.color-chip.sun{ background:var(--accent-3); }
.color-chip.mint{ background:#06d6a0; }

/* Italian Flag */
.flag-wrap{ display:none; }

/* Barra fija superior con los colores de la bandera italiana
   - franja delgada, ancho completo, no interfiere con clicks (pointer-events:none)
   - se añade como elemento global con alto z-index
*/
.italian-flag-global{
    position:fixed;
    left:0;
    right:0;
    top:0;
    height:8px; /* franja fina */
    z-index:9999;
    background: linear-gradient(90deg, #009246 0 33.333%, #ffffff 33.333% 66.666%, #ce2b37 66.666% 100%);
    box-shadow: 0 2px 8px rgba(0,0,0,0.35);
    pointer-events: none;
}

@media (max-width: 640px){
    .italian-flag-global{ height:6px; }
}
@keyframes flagFloat{
    0%{ transform:translateY(0) rotate(0deg); }
    50%{ transform:translateY(-8px) rotate(2deg); }
    100%{ transform:translateY(0) rotate(0deg); }
}

/* Layout 2 columnas */
.grid-2{
    display:grid;
    grid-template-columns:minmax(0,2.1fr) minmax(0,1.4fr);
    gap:1.6rem;
}

/* Cards */
.mod-card{
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:var(--radius);
    padding:1.75rem;
    border:1px solid rgba(255,255,255,0.045);
    box-shadow:0 8px 28px rgba(0,0,0,0.55);
}

/* Texto clave/valor */
.key{
    color:var(--muted);
    font-weight:600;
    font-size:0.85rem;
    text-transform:uppercase;
    letter-spacing:0.5px;
}
.val{
    color:var(--text);
    font-weight:700;
    font-size:1.1rem;
}

/* Tag del verbo */
.tag-verb{
    padding:0.45rem 0.95rem;
    border-radius:999px;
    font-weight:800;
    background:var(--accent-grad);
    color:white;
    box-shadow:0 8px 22px rgba(212,0,0,0.22);
    animation:accentPulse 6s infinite;
}
@keyframes accentPulse{
    0%{ box-shadow:0 0 0 rgba(212,0,0,0); }
    50%{ box-shadow:0 0 28px rgba(212,0,0,0.2); }
    100%{ box-shadow:0 0 0 rgba(212,0,0,0); }
}

/* Feedback */
.feedback-correct{
    margin-top:0.8rem;
    background:rgba(0,180,60,0.12);
    border-radius:12px;
    border:1px solid rgba(0,255,120,0.45);
    padding:0.8rem 1rem;
    font-weight:700;
    color:#e9fff1;
}
.feedback-incorrect{
    margin-top:0.8rem;
    background:rgba(220,53,69,0.15);
    border-radius:12px;
    border:1px solid rgba(255,80,110,0.65);
    padding:0.8rem 1rem;
    font-weight:700;
    color:#ffe9ec;
}

/* Progress ring */
.progress-ring{
    --size:84px;
    --pct:0;
    width:var(--size);
    height:var(--size);
    border-radius:50%;
    background:
        conic-gradient(var(--accent) calc(var(--pct)*1%), rgba(255,255,255,0.08) 0);
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
}
.progress-ring::before{
    content:'';
    position:absolute;
    inset:6px;
    border-radius:50%;
    background:#050608;
}
.progress-ring .inner{
    position:relative;
    font-weight:800;
    color:var(--text);
    font-size:0.9rem;
}

/* ============================
   TABLA DE RIPASSO TIPO EXCEL (mejorada)
   ============================ */
.excel-wrapper{
    overflow:auto;
    height:750px;
    border-radius:14px;
    border:1px solid rgba(255,255,255,0.06);
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(6,8,10,0.35));
    backdrop-filter:blur(8px) saturate(120%);
    padding:14px;
    box-shadow: 0 8px 30px rgba(2,6,23,0.6);
}

.excel-table{
    width:100%;
    border-collapse:separate;
    border-spacing:0;
    font-size:0.98rem;
    letter-spacing:0.2px;
    color:var(--text, #e9f0f3);
    font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', sans-serif;
    text-align:center;
}

.excel-table th, .excel-table td{
    padding:12px 14px;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
    vertical-align:middle;
}

.excel-table thead th{
    background: rgba(18,20,22,0.6);
    backdrop-filter: blur(6px);
    color: #ffffff !important;
    font-family: 'Montserrat', 'Inter', sans-serif;
    font-weight:700;
    font-size:0.85rem;
    text-transform:uppercase;
    letter-spacing:1px;
    position:sticky;
    top:0;
    z-index:4;
    border-bottom: 1px solid rgba(255,255,255,0.04);
}

.excel-table tbody tr{
    transition: transform 0.12s ease, box-shadow 0.12s ease;
}

.excel-table tbody tr td{
    background: rgba(255,255,255,0.01);
    border-bottom: 1px solid rgba(255,255,255,0.03);
}

.excel-table tbody tr:nth-child(even) td{
    background: rgba(255,255,255,0.015);
}

.excel-table tbody tr:hover td{
    transform: translateY(-2px);
    background: linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    box-shadow: 0 6px 20px rgba(0,0,0,0.45) inset;
}

.excel-table th:first-child, .excel-table td:first-child{
    text-align:left;
}

.excel-table th:last-child, .excel-table td:last-child{
    text-align:center;
}

.xl-row{ background: linear-gradient(90deg, rgba(200,220,255,0.04), rgba(200,220,255,0.02)) !important; }
.xl-col{ background: linear-gradient(180deg, rgba(200,220,255,0.02), rgba(200,220,255,0.01)) !important; }
.xl-selected{
    background: linear-gradient(90deg, rgba(212,0,0,0.9), rgba(255,40,0,0.8)) !important;
    font-weight:800;
    color:white !important;
    box-shadow: 0 10px 30px rgba(212,0,0,0.18) inset;
}

/* Sidebar tweaks */
section[data-testid="stSidebar"]{
    background:linear-gradient(180deg,#050608 0%, #080b10 100%);
}

/* Session tables (aciertos / errores) */
.session-table{
    width:100% !important;
    border-collapse:collapse !important;
    margin-top:8px;
    font-size:0.95rem !important;
    color:var(--text) !important;
    table-layout: fixed !important;
    border-radius: 8px;
    overflow: hidden;
}
.session-table th{
    text-align:left !important;
    padding:8px 10px !important;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)) !important;
    color:var(--muted-2) !important;
    font-weight:700 !important;
    border-bottom:1px solid rgba(255,255,255,0.04) !important;
    text-transform:none !important;
    font-size:0.85rem !important;
}
.session-table td{
    padding:8px 10px !important;
    border-bottom:1px solid rgba(255,255,255,0.03) !important;
    vertical-align:middle !important;
    white-space: normal !important;
    word-break: break-word !important;
}
.session-table.session-errors td{ color: #ffd7d7 !important; }
.session-table tr:hover td{ background: rgba(255,255,255,0.01) !important; }

/* Column width hints: Fecha wider, Verbo/Modo narrower */
.session-table thead th:first-child, .session-table tbody td:first-child{ width:180px !important; }
.session-table thead th:nth-child(2), .session-table tbody td:nth-child(2){ width:90px !important; }

@media (max-width: 900px){
    .session-table{ font-size:0.85rem !important; }
    .session-table thead th:first-child, .session-table tbody td:first-child{ width:140px !important; }
}

/* Responsive adjustments: 모바일 / tablets */
@media (max-width: 900px){
    .grid-2{ grid-template-columns: 1fr; gap:1rem; }
    .hero{ padding:1.2rem; border-radius:12px; }
    .hero-title{ font-size:2rem; }
    .hero-sub{ font-size:0.95rem; }
    .mod-card{ padding:1rem; }
    .excel-wrapper{ height:50vh; padding:10px; }
    .excel-table th, .excel-table td{ padding:8px 10px; font-size:0.88rem; }
    .progress-ring{ --size:64px; }
    .tag-verb{ padding:0.35rem 0.7rem; font-size:0.9rem; }
}

@media (max-width: 480px){
    .hero{ padding:0.8rem; }
    .hero-title{ font-size:1.6rem; }
    .grid-2{ grid-template-columns: 1fr; }
    .mod-card{ padding:0.8rem; border-radius:10px; }
    .excel-wrapper{ height:42vh; }
    .excel-table th, .excel-table td{ padding:6px 8px; font-size:0.82rem; }
    .session-table{ font-size:0.78rem !important; display:block; overflow:auto; }
    .session-table thead th:first-child, .session-table tbody td:first-child{ width:130px !important; }
    .progress-ring{ --size:56px; }
}
